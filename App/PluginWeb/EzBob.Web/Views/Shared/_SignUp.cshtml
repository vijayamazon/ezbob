@using EzBob.Web.Infrastructure
@using Scorto.NHibernate.Model
@using StructureMap
@using EZBob.DatabaseLib.Model.Database
@model dynamic
@{
    var securityQuestions = @ViewData["Questions"] as List<SecurityQuestion>;
    var customerReason = @ViewData["Reasons"] as List<CustomerReason>;
    var customerSourceOfRepayment = @ViewData["Sources"] as List<CustomerSourceOfRepayment>;
    var config = ObjectFactory.GetInstance<IEzBobConfiguration>();
    string captchamode = config.CaptchaMode;
    bool ebayPixelEnabled = config.EbayPixelEnabled;
}


@using (Html.BeginForm("SignUp", "Account", new {Area = ""}, FormMethod.Post, new {@class = "signup clearfix"}))
{
    <h2 class="form_start">Create an Account</h2>
    
    if (ebayPixelEnabled)
    {
        <img src="https://ad-emea.doubleclick.net/activity;dc_pixel_url=rmboom;rm=ezbobregister;ord='<%- ordsu %>'?" width="1" height="1" border="0" alt="" />
    }
    
	<div class="form_field_container">
		<label class="attardi-input">
			<span>Email Address</span>
			<input type="email" name="Email" id="Email" tabindex="1" class="form_field"/>
		</label>
		<img id="EmailImage" class="field_status required"/>
	</div>

	<div id="strength-password-view" class="form_field_container">
		<label class ="attardi-input">
			<span>Password</span>
			<input type="password" tabindex="2" class="form_field" name="signupPass1" id="signupPass1"/>
		</label>
		<img id="Password1Image" class="field_status required"/>
		<p id="message" class="help-block"></p>
	</div>

	<div class="form_field_container">
		<label class ="attardi-input">
			<span>Confirm Password</span>
			<input type="password" tabindex="3" class="form_field" name="signupPass2" id="signupPass2"/>
		</label>
		<img id="Password2Image" class="field_status required"/>
	</div>

    <div class="form_field_container">
        <label class ="attardi-input">
            <span>Promo Code</span>
            <input type="text" tabindex="4" class="form_field" name="promoCode" id="promoCode"/>
        </label>
        <img id="promoCodeImage" class="field_status"/>
    </div>

	<div class="form_field_container">
		<!-- Don't remove the SPAN, its job is to display box-shadow and nothing else. -->
		<span class="inform">
			<label class="attardi-input">
				<span>Secret Question</span>
				<select name="securityQuestion" id="securityQuestion" tabindex="5" class="form_field">
					<option value=""></option>
					@if (securityQuestions != null) {
						foreach (var item in securityQuestions) {
							<option value="@item.Id">@item.Name</option>
						} // foreach
					} // if
				</select>
			</label>
		</span>
		<img id="SecurityQuestionImage" class="field_status required" />
	</div>

	<div class="form_field_container">
		<label class="attardi-input">
			<span>Secret Answer</span>
			<input type="text" name="SecurityAnswer" id="SecurityAnswer" tabindex="6" class="form_field"/>
		</label>
		<img id="SecretAnswerImage" class="field_status required"/>
	</div>

    <div class="form_field_container">
        <label class="attardi-input">
            <span>Amount</span>
            <input type="text" name="Amount" id="Amount" tabindex="7" class="form_field"/>
        </label>
        <img id="AmountImage" class="field_status"/>
    </div>
    
    <div class="form_field_container">
        <span class="inform">
            <label class="attardi-input">
                <span>Reason</span>
                <select name="customerReason" id="customerReason" tabindex="8" class="form_field">
                    <option value=""></option>
                    @if (customerReason != null)
                    {
                        foreach (var item in customerReason)
                        {
                            <option value="@item.Id">@item.Reason</option>
                        } // foreach
                    } // if
                </select>
            </label>
        </span>
        <img id="customerReasonImage" class="field_status required" />
    </div>
    
    <div class="form_field_container">
        <span class="inform">
            <label class="attardi-input">
                <span>Source Of Repayment</span>
                <select name="customerSourceOfRepayment" id="customerSourceOfRepayment" tabindex="9" class="form_field">
                    <option value=""></option>
                    @if (customerSourceOfRepayment != null)
                    {
                        foreach (var item in customerSourceOfRepayment)
                        {
                            <option value="@item.Id">@item.SourceOfRepayment</option>
                        } // foreach
                    } // if
                </select>
            </label>
        </span>
        <img id="customerSourceOfRepaymentImage" class="field_status required" />
    </div>
	<div class="form_field_container">
		@EzForm.Captcha(captchamode)
	</div>

	<div class="form_buttons_container"><input type="submit" id="signupSubmitButton" value="Continue" class="button orange continue disabled" tabindex="11"></div>
}