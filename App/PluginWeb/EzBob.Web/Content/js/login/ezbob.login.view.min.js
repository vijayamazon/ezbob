(function(){var n,t={}.hasOwnProperty,i=function(n,i){function u(){this.constructor=n}for(var r in i)t.call(i,r)&&(n[r]=i[r]);return u.prototype=i.prototype,n.prototype=new u,n.__super__=i.prototype,n};n=typeof exports!="undefined"&&exports!==null?exports:this;n.EzBob=n.EzBob||{};EzBob.CustomerLoginView=function(n){function t(){return t.__super__.constructor.apply(this,arguments)}return i(t,n),t.prototype.initialize=function(){return this.template=_.template($("#customerlogin-template").html())},t.prototype.events={"click :submit":"submit","keyup input":"inputChanged","change input":"inputChanged","click.checks #RememberMe":"rememberMeChanged"},t.prototype.render=function(){var n;return this.$el.html(this.template()),this.form=this.$el.find(".simple-login"),this.validator=EzBob.validateLoginForm(this.form),this.$el.find("img[rel]").setPopover("left"),this.$el.find("li[rel]").setPopover("left"),n=this.$el.find("IMG.field_status"),n.filter(".required").field_status({required:!0}),n.not(".required").field_status({required:!1}),$("#Password").focus(),$("#UserName").focus(),EzBob.UiAction.registerView(this),this},t.prototype.rememberMeChanged=function(){var n;return n=this.$el.find("#RememberMe"),n.val(n.is(":checked"))},t.prototype.inputChanged=function(){var n;return n=EzBob.Validation.checkForm(this.validator),$("#loginSubmit").toggleClass("disabled",!n)},t.prototype.submit=function(){var n,t,i=this;return this.$el.find(":submit").hasClass("disabled")?!1:EzBob.Validation.checkForm(this.validator)?(this.blockBtn(!0),!EzBob.Validation.checkForm(this.validator))?(this.blockBtn(!1),!1):(n=this.form.serialize(),console.log("data is",n),t=$.post(this.form.attr("action"),n),t.done(function(n,t){return EzBob.ServerLog.debug("login request completed with status",t),t==="success"?n.success?document.location.href=n.broker?""+window.gRootPath+"Broker#login":""+window.gRootPath+"Customer/Profile":(EzBob.App.trigger("error",n.errorMessage),i.blockBtn(!1)):(n.errorMessage&&EzBob.App.trigger("error",n.errorMessage),i.blockBtn(!1))}),!1):!1},t.prototype.blockBtn=function(n){return BlockUi(n?"on":"off"),this.$el.find(":submit").toggleClass("disabled",n)},t}(Backbone.View)}).call(this);
/*
//# sourceMappingURL=ezbob.login.view.min.js.map
*/