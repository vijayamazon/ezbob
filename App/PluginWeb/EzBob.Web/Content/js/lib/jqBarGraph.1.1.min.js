(function(n){function r(n,t){return n[0]<t[0]?-1:n[0]>t[0]?1:0}function u(n,t){return n[0]>t[0]?-1:n[0]<t[0]?1:0}var t=[];n.fn.jqBarGraph=n.fn.jqbargraph=function(f){init=function(i){t[i.id]=n.extend({},n.fn.jqBarGraph.defaults,f),n(i).css({width:t[i.id].width,height:t[i.id].height,position:"relative","text-align":"center"}),doGraph(i)},sum=function(n){var i=0,t;for(t in n)n.hasOwnProperty(t)&&(i+=n[t]);return i.toFixed(2)},max=function(n){maxvalue=0;for(var t in n)n.hasOwnProperty(t)&&(value=n[t][0],value instanceof Array&&(value=sum(value)),parseFloat(value)>parseFloat(maxvalue)&&(maxvalue=value));return maxvalue},maxMulti=function(n){var i,t;maxvalue=0,maxvalue2=0;for(i in n)if(n.hasOwnProperty(i)){ar2=n[i][0];for(t in ar2)ar2.hasOwnProperty(t)&&ar2[t]>maxvalue2&&(maxvalue2=ar2[t]);maxvalue2>maxvalue&&(maxvalue=maxvalue2)}return maxvalue},doGraph=function(f){var h,e,s;if(arr=t[f.id],data=arr.data,data==undefined){n(f).html("There is not enought data for graph");return}arr.sort=="asc"&&data.sort(r),arr.sort=="desc"&&data.sort(u),legend="",prefix=arr.prefix,postfix=arr.postfix,space=arr.barSpace,legendWidth=arr.legend?arr.legendWidth:0,fieldWidth=(n(f).width()-legendWidth)/data.length,totalHeight=n(f).height(),h=[],max=max(data),colPosition=0;for(e in data)if(data.hasOwnProperty(e)){if(valueData=data[e][0],value=valueData instanceof Array?sum(valueData):valueData,lbl=data[e][1],color=data[e][2],unique=e+f.id,color==undefined&&arr.colors==!1&&(color=arr.color),arr.colors&&!color&&(colorsCounter=arr.colors.length,colorsCounter==colPosition&&(colPosition=0),color=arr.colors[colPosition],colPosition++),arr.type=="multi"&&(color="none"),lbl==undefined&&(lbl=arr.lbl),out="<div class='graphField"+f.id+"' id='graphField"+unique+"' style='position: absolute'>",out+="<div class='graphValue"+f.id+"' id='graphValue"+unique+"'>"+prefix+value+postfix+"<\/div>",out+="<div class='graphBar"+f.id+"' id='graphFieldBar"+unique+"' style='background-color:"+color+";position: relative; overflow: hidden;'><\/div>",(!arr.legend||arr.legends)&&(out+="<div class='graphLabel"+f.id+"' id='graphLabel"+unique+"'>"+lbl+"<\/div>"),out+="<\/div>",n(f).append(out),totalHeightBar=totalHeight-n(".graphLabel"+f.id).height()-n(".graphValue"+f.id).height(),fieldHeight=totalHeightBar*value/max,n("#graphField"+unique).css({left:fieldWidth*e,width:fieldWidth-space,"margin-left":space}),valueData instanceof Array){arr.type=="multi"?(maxe=maxMulti(data),totalHeightBar=fieldHeight=totalHeight-n(".graphLabel"+f.id).height(),n(".graphValue"+f.id).remove()):maxe=max;for(i in valueData)valueData.hasOwnProperty(i)&&(heig=totalHeightBar*valueData[i]/maxe,wid=parseInt((fieldWidth-space)/valueData.length),sv="",fs=0,arr.showValues&&(sv=arr.prefix+valueData[i]+arr.postfix,fs=12),o="<div class='subBars"+f.id+"' style='height:"+heig+"px; background-color: "+arr.colors[i]+"; left:"+wid*i+"px; color:"+arr.showValuesColor+"; font-size:"+fs+"px' >"+sv+"<\/div>",n("#graphFieldBar"+unique).prepend(o))}arr.type=="multi"&&n(".subBars"+f.id).css({width:wid,position:"absolute",bottom:0}),arr.position=="bottom"&&n(".graphField"+f.id).css("bottom",0),arr.legends||h.push([color,lbl,f.id,unique]),arr.animate?(n("#graphFieldBar"+unique).css({height:0}),n("#graphFieldBar"+unique).animate({height:fieldHeight},arr.speed*1e3)):n("#graphFieldBar"+unique).css({height:fieldHeight})}for(s in arr.legends)arr.legends.hasOwnProperty(s)&&h.push([arr.colors[s],arr.legends[s],f.id,s]);createLegend(h),arr.legend&&(n(f).append("<div id='legendHolder"+unique+"'><\/div>"),n("#legendHolder"+unique).css({width:legendWidth,float:"right","text-align":"left"}),n("#legendHolder"+unique).append(legend),n(".legendBar"+f.id).css({float:"left",margin:3,height:12,width:20,"font-size":0})),arr.title&&(n(f).wrap("<div id='graphHolder"+unique+"'><\/div>"),n("#graphHolder"+unique).prepend(arr.title).css({width:arr.width+"px","text-align":"center"}))},createLegend=function(n){legend="";for(var t in n)n.hasOwnProperty(t)&&(legend+="<div id='legend"+n[t][3]+"' style='overflow: hidden; zoom: 1;'>",legend+="<div class='legendBar"+n[t][2]+"' id='legendColor"+n[t][3]+"' style='background-color:"+n[t][0]+"'><\/div>",legend+="<div class='legendLabel"+n[t][2]+"' id='graphLabel"+unique+"'>"+n[t][1]+"<\/div>",legend+="<\/div>")},this.each(function(){init(this)})},n.fn.jqBarGraph.defaults={barSpace:10,width:400,height:300,color:"#000000",colors:!1,lbl:"",sort:!1,position:"bottom",prefix:"",postfix:"",animate:!0,speed:1.5,legendWidth:100,legend:!1,legends:!1,type:!1,showValues:!0,showValuesColor:"#fff",title:!1}})(jQuery);
//@ sourceMappingURL=jqBarGraph.1.1.min.js.map