(function(){var n,i=function(n,t){return function(){return n.apply(t,arguments)}},r={}.hasOwnProperty,t=function(n,t){function u(){this.constructor=n}for(var i in t)r.call(t,i)&&(n[i]=t[i]);return u.prototype=t.prototype,n.prototype=new u,n.__super__=t.prototype,n};n=typeof exports!="undefined"&&exports!==null?exports:this;n.EzBob=n.EzBob||{};EzBob.YodleeAccountInfoView=function(n){function r(){return this.render=i(this.render,this),r.__super__.constructor.apply(this,arguments)}return t(r,n),r.prototype.template="#YodleeAccoutInfoTemplate",r.prototype.events={"click a.back":"back",'change input[name="Bank"]':"bankChanged","click .radio-fx":"parentBankSelected","change .SubBank":"subBankSelectionChanged","click #yodleeLinkAccountBtn":"linkAccountClicked","click #OtherYodleeBanks":"OtherYodleeBanksClicked","change #OtherYodleeBanks":"OtherYodleeBanksClicked"},r.prototype.initialize=function(){var n;return n=this,window.YodleeAccountAdded=function(t){return t.error?EzBob.App.trigger("error",t.error):EzBob.App.trigger("info","Congratulations. Bank account was added successfully."),$.colorbox.close(),n.trigger("completed"),n.trigger("ready"),n.trigger("back")},window.YodleeAccountAddingError=function(t){return $.colorbox.close(),EzBob.App.trigger("error",t),n.trigger("back")},window.YodleeAccountRetry=function(){return n.attemptsLeft=(n.attemptsLeft||5)-1,{url:n.$el.find("#yodleeContinueBtn").attr("href"),attemptsLeft:n.attemptsLeft}}},r.prototype.render=function(){return r.__super__.render.call(this),EzBob.UiAction.registerView(this),this},r.prototype.OtherYodleeBanksClicked=function(n){var t,i,r;return t=$(n.currentTarget).find(":selected").val(),i=$(n.currentTarget).find(":selected").text(),t?(this.$el.find("input[type='radio'][name='Bank']:checked").removeAttr("checked"),this.$el.find(".SubBank:not(.hide)").addClass("hide"),this.$el.find("a.selected-bank").removeClass("selected-bank"),r=""+window.gRootPath+"Customer/YodleeMarketPlaces/AttachYodlee?csId="+t+"&bankName="+i,this.$el.find("#yodleeContinueBtn").attr("href",r),this.$el.find("#yodleeLinkAccountBtn").removeClass("disabled")):this.$el.find("#yodleeLinkAccountBtn:not([class*='disabled'])").addClass("disabled")},r.prototype.subBankSelectionChanged=function(){var n;return this.$el.find(".SubBank option:selected").length===0?!1:(n=""+window.gRootPath+"Customer/YodleeMarketPlaces/AttachYodlee?csId="+this.$el.find("option:selected").val()+"&bankName="+this.$el.find("input[type='radio'][name='Bank']:checked").attr("value"),this.$el.find("#yodleeContinueBtn").attr("href",n),this.$el.find("#yodleeLinkAccountBtn").removeClass("disabled"))},r.prototype.bankChanged=function(){var t,n;return this.$el.find("input[type='radio'][name!='Bank']:checked").removeAttr("checked"),n=this.$el.find(".SubBank:not([class*='hide'])"),n.addClass("hide"),this.$el.find("#subTypeHeader[class*='hide']").removeClass("hide"),n.find("option").removeAttr("selected"),t=this.$el.find("input[type='radio'][name='Bank']:checked").val(),this.$el.find("."+t+"Container").removeClass("hide"),$("#yodleeLinkAccountBtn:not([class*='disabled'])").addClass("disabled")},r.prototype.linkAccountClicked=function(){return this.$el.find("#yodleeLinkAccountBtn").hasClass("disabled")?!1:this.$el.find(".yodlee_help").colorbox({inline:!0})},r.prototype.parentBankSelected=function(n){n.preventDefault();this.$el.find("#Bank_"+n.currentTarget.id).click();this.$el.find("a.selected-bank").removeClass("selected-bank");$(n.currentTarget).addClass("selected-bank");this.$el.find(".SubBank:not(.hide) option:selected").prop("selected",!1);this.$el.find("#OtherYodleeBanks option").eq(0).prop("selected",!0);this.$el.find("#OtherYodleeBanks").change()},r.prototype.serializeData=function(){return{YodleeBanks:JSON.parse($("#yodlee-banks").text())}},r.prototype.back=function(){return this.trigger("back"),!1},r.prototype.getDocumentTitle=function(){return EzBob.App.trigger("clear"),"Link Yodlee Account"},r}(Backbone.Marionette.ItemView);EzBob.YodleeAccountModel=function(n){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,n),i.prototype.urlRoot=""+window.gRootPath+"Customer/YodleeMarketPlaces/Accounts",i}(Backbone.Model);EzBob.YodleeAccounts=function(n){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,n),i.prototype.model=EzBob.YodleeAccountModel,i.prototype.url=""+window.gRootPath+"Customer/YodleeMarketPlaces/Accounts",i}(Backbone.Collection)}).call(this)