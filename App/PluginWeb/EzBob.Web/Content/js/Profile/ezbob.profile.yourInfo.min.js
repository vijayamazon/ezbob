(function(){var t,i={}.hasOwnProperty,n=function(n,t){function u(){this.constructor=n}for(var r in t)i.call(t,r)&&(n[r]=t[r]);return u.prototype=t.prototype,n.prototype=new u,n.__super__=t.prototype,n};t=typeof exports!="undefined"&&exports!==null?exports:this,t.EzBob=t.EzBob||{},EzBob.Profile=EzBob.Profile||{},EzBob.Profile.YourInfoMainView=function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return n(i,t),i.prototype.template="#your-info-template",i.prototype.initialize=function(){return this.isAddressValidation=!0},i.prototype.events={"click .edit-personal":"editPersonalViewShow","click .submit-personal":"saveData","click .cancel":"reload","change .personEditInput":"inputChanged","keyup .personEditInput":"inputChanged"},i.prototype.ui={form:"form.editYourInfoForm"},i.prototype.setInputReadOnly=function(n){return this.$el.find(".personEditInput").attr("readonly",n).attr("modifed",!n),this.$el.find(".addAddressInput").attr("modifed",!n),n?(this.$el.find(".submit-personal, .cancel, .addAddressInput, .addAddress, .removeAddress").hide(),this.$el.find(".edit-personal").show()):(this.$el.find(".submit-personal, .cancel, .addAddressInput, .addAddress, .removeAddress").show(),this.$el.find(".edit-personal").hide())},i.prototype.editPersonalViewShow=function(){return this.setInputReadOnly(!1)},i.prototype.addressModelChange=function(){var n,t;return(n=this.model.get("PersonalAddress"),this.addressValidation(n,"#PersonalAddress"),t=this.model.get("BusinessTypeReduced"),t==="Limited")?(n=this.model.get("LimitedCompanyAddress"),this.addressValidation(n,"#LimitedCompanyAddress")):t==="NonLimited"?(n=this.model.get("NonLimitedCompanyAddress"),this.addressValidation(n,"#NonLimitedAddress")):void 0},i.prototype.addressValidation=function(n,t){return this.isAddressValidation=n.length>0,this.setError(t,!this.isAddressValidation)},i.prototype.setError=function(n,t){return t?this.addAddressError(n):this.clearAddressError(n)},i.prototype.addAddressError=function(n){var t;return t=$('<label class="error" generated="true">This field is required<\/label>'),EzBob.Validation.errorPlacement(t,this.$el.find(n))},i.prototype.clearAddressError=function(n){return EzBob.Validation.unhighlight(this.$el.find(n))},i.prototype.saveData=function(){var t,i,n,r,u=this;return!this.validator.form()||!this.isAddressValidation?(EzBob.App.trigger("error","You must fill in all of the fields."),!1):(i=this.ui.form.serializeArray(),t=this.ui.form.attr("action"),r=this,n=$.post(t,i),n.success(function(){return r.reload(),EzBob.App.trigger("info","Your information updated successfully")}),n.fail(function(){return EzBob.App.trigger("error","Business check service temporary unavaliable, please contact with system administrator","")}))},i.prototype.reload=function(){var n,t,i=this;return t=this.model.fetch(),n=this,t.done(function(){return n.render(),scrollTop(),n.setInputReadOnly(!0)})},i.prototype.regions={personal:".personal-info",company:".company-info"},i.prototype.inputChanged=function(){return this.isValid=!this.validator.form()||!this.isAddressValidation,this.$el.find(".submit-personal").toggleClass("disabled",this.isValid)},i.prototype.onRender=function(){var n;return this.renderPersonal(),n=this.model.get("BusinessTypeReduced"),n==="Limited"?this.renderLimited():n==="NonLimited"&&this.renderNonLimited(),this.setInputReadOnly(!0),this.validator=EzBob.validateYourInfoEditForm(this.ui.form),this.$el.find(".phonenumber").numericOnly(11),this.$el.find(".cashInput").numericOnly(11)},i.prototype.renderPersonal=function(){var n=new EzBob.Profile.PersonalInfoView({model:this.model});this.model.get("PersonalAddress").on("all",this.addressModelChange,this);return this.personal.show(n)},i.prototype.renderNonLimited=function(){var n=new EzBob.Profile.NonLimitedInfoView({model:this.model});this.model.get("NonLimitedCompanyAddress").on("all",this.addressModelChange,this);return this.company.show(n)},i.prototype.renderLimited=function(){var n=new EzBob.Profile.LimitedInfoView({model:this.model});this.model.get("LimitedCompanyAddress").on("all",this.addressModelChange,this);return this.company.show(n)},i}(Backbone.Marionette.Layout),EzBob.Profile.PersonalInfoView=function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return n(i,t),i.prototype.template="#personal-info-template",i.prototype.regions={personAddress:"#PersonalAddress"},i.prototype.onRender=function(){var n;return n=new EzBob.AddressView({model:this.model.get("PersonalAddress"),name:"PersonalAddress",max:10,isShowClear:!0}),this.personAddress.show(n),this},i}(Backbone.Marionette.Layout),EzBob.Profile.NonLimitedInfoView=function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return n(i,t),i.prototype.template="#nonlimited-info-template",i.prototype.regions={nonlimitedAddress:"#NonLimitedAddress",director:".director-conteiner"},i.prototype.onRender=function(){var t,i,n;return t=new EzBob.AddressView({model:this.model.get("NonLimitedCompanyAddress"),name:"NonLimitedCompanyAddress",max:10,isShowClear:!0}),this.nonlimitedAddress.show(t),n=this.model.get("NonLimitedInfo").Directors,n!==null&&n.length!==0&&(i=new EzBob.Profile.NonLimitedDirectorInfoView({collection:new EzBob.Directors(n)}),this.director.show(i)),this},i}(Backbone.Marionette.Layout),EzBob.Profile.LimitedInfoView=function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return n(i,t),i.prototype.template="#limited-info-template",i.prototype.regions={limitedAddress:"#LimitedCompanyAddress",director:".director-conteiner"},i.prototype.onRender=function(){var t,i,n;return t=new EzBob.AddressView({model:this.model.get("LimitedCompanyAddress"),name:"LimitedCompanyAddress",max:10,isShowClear:!0}),this.limitedAddress.show(t),n=this.model.get("LimitedInfo").Directors,n!==null&&n.length!==0&&(i=new EzBob.Profile.DirectorCompositeView({collection:new EzBob.Directors(n)}),this.director.show(i)),this},i}(Backbone.Marionette.Layout),EzBob.Profile.DirectorInfoView=function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return n(i,t),i.prototype.template="#director-info-template",i.prototype.regions={directorAddress:"#DirectorAddress"},i.prototype.onRender=function(){var n;return n=new EzBob.AddressView({model:this.model.get("DirectorAddress"),name:"DirectorAddress",max:10,isShowClear:!1}),this.directorAddress.show(n)},i}(Backbone.Marionette.Layout),EzBob.Profile.DirectorCompositeView=function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return n(i,t),i.prototype.template="#directors-info",i.prototype.itemView=EzBob.Profile.DirectorInfoView,i.prototype.itemViewContainer="div",i}(Backbone.Marionette.CompositeView)}).call(this)