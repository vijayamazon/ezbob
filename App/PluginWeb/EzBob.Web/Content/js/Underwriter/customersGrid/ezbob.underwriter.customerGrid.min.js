(function(){var n;n=typeof exports!="undefined"&&exports!==null?exports:this,n.EzBob=n.EzBob||{},EzBob.Underwriter=EzBob.Underwriter||{},EzBob.Underwriter.customerGrid=function(n){var f,i,t,e,o,s,r,u,h;n.$el=$(n.el),t="#"+(n.$el.find("table").attr("id")||""),r="#"+(n.$el.find("div").attr("id")||""),h=n.url,e=n.model,o=n.names,t==="#"&&(t=""+n.$el.attr("id")+"-table",$("<table id='"+t+"'><\/table>").prependTo(n.$el),t="#"+t),r==="#"&&(r=""+n.$el.attr("id")+"-pager",$("<div id='"+r+"'/>").prependTo(n.$el),r="#"+r),s={sortable:!0,datatype:"json",mtype:"GET",sortname:n.el==="#sales"?"OfferDate":"Id",sortorder:"desc",viewrecords:!0,hidegrid:!1,gridview:!0,hoverrows:!1,colModel:e,colNames:o,url:h,pager:r,autowidth:!0,height:"auto",rowNum:100,shrinkToFit:!0,loadError:function(){return BlockUi("off",$(t))},loadComplete:function(){return BlockUi("off",$(t))},gridComplete:function(){var i;return n.$el.find("[data-toggle='tooltip']").tooltip(),BlockUi("off",$(t)),i=n.$el.find(".coloredCell"),_.each(i,function(n){return $(n).closest("tr").find("td").css("background-color",$(n).text())})},loadBeforeSend:function(){return BlockUi("on",$(t))}},f=$(t).jqGrid(s),f.jqGrid("filterToolbar",{searchOnEnter:!0}),f.jqGrid("navGrid",r,{del:!1,add:!1,edit:!1,search:!0},{},{},{},{multipleSearch:!0});EzBob.App.vent.on("uw:grids:refresh",function(){return $(""+t+":visible").trigger("reloadGrid")});EzBob.App.vent.on("uw:grids:performsearch",function(){return $(t)[0].triggerToolbar()});i=n.$el.find("#show-test-customers");i.on("change",function(){var n;return n=i.is(":checked"),EzBob.Config.isTest=n,n?i.attr("checked","checked"):i.removeAttr("checked"),i.trigger("reload")});i.on("reload",function(){var n;return n=i.is(":checked"),EzBob.Config.isTest=n,$(t).jqGrid("setGridParam",{postData:{IsTest:n}}),$(t).trigger("reloadGrid")});u=n.$el.find("#show-all-customers");u.on("change",function(){var n;return n=u.is(":checked"),EzBob.Config.showAll=n,n?u.attr("checked","checked"):u.removeAttr("checked"),u.trigger("reload")});u.on("reload",function(){var n;return n=u.is(":checked"),EzBob.Config.showAll=n,$(t).jqGrid("setGridParam",{postData:{ShowAll:n}}),$(t).trigger("reloadGrid")});return n.$el.on("dblclick","tr",function(n){var t;return t=$(n.currentTarget).find("a").first().attr("href"),t&&(window.location.href=t),!1})},$.fn.fmatter.profileWithTypeLink=function(n,t){var i,r;return i="#profile/"+(n.id||n)+"/"+t.gid.replace("-table",""),r=n.text||n,$.fn.fmatter.withScrollbar("<a class='profileLink' href='"+i+"'>"+r+"<\/a>")},$.fn.fmatter.showMedalIcon=function(n){var t;return t=n.text||n,"<i data-toggle='tooltip' title='"+t+"' class='"+t.toLowerCase().replace(/\s/g,"")+"'><\/i>"},$.fn.fmatter.showMPIcon=function(n,t){var i,r;return r=n.text||n,i=r.replace(/\s|\d/g,""),i=t[i]?"cgaccount":i.toLowerCase(),"<i data-toggle='tooltip' title='"+r+"' class='"+i+"'><\/i>"},$.fn.fmatter.showMPsIcon=function(n){var t,i;return $.fn.fmatter.showMPsIcon.prototype.CGAccounts||($.fn.fmatter.showMPsIcon.prototype.CGAccounts=$.parseJSON($("div#cg-account-list").text())),t=n.text||n,t=t.split(",").clean(""),i="",_.each(t,function(n){return i+=$.fn.fmatter.showMPIcon(n,$.fn.fmatter.showMPsIcon.prototype.CGAccounts)}),"<div style='overflow: auto; width: 102%'>"+(i+" ")+"<\/div>"},$.fn.fmatter.profileLink=function(n){var t,i;return t="#profile/"+(n.id||n),i=n.text||n,$.fn.fmatter.withScrollbar("<a class='profileLink' href='"+t+"'>"+i+"<\/a>")},$.fn.fmatter.datetimeNative=function(n){var i,t;return n?(i=moment(n),isNaN(i))?(t=n,i=new Date(parseInt(t.substring(0,4)),parseInt(t.substring(5,7)),parseInt(t.substring(8,10)),parseInt(t.substring(11,13)),parseInt(t.substring(14,16))),i=new Date(parseInt(t.substring(0,4)),parseInt(t.substring(5,7))-1,parseInt(t.substring(8,10)),parseInt(t.substring(11,13)),parseInt(t.substring(14,16))),i.format("dd.MM.yyyy HH:mm")):i.format("DD.MM.YYYY HH:mm"):""},$.fn.fmatter.dateNative=function(n){var i,t;return n?(i=moment(n),isNaN(i))?(t=n,i=new Date(parseInt(t.substring(0,4)),parseInt(t.substring(5,7)),parseInt(t.substring(8,10)),parseInt(t.substring(11,13)),parseInt(t.substring(14,16))),i=new Date(parseInt(t.substring(0,4)),parseInt(t.substring(5,7))-1,parseInt(t.substring(8,10)),parseInt(t.substring(11,13)),parseInt(t.substring(14,16))),i.format("dd.MM.yyyy")):i.format("DD.MM.YYYY"):""},$.fn.fmatter.CheckDateWithNow=function(n,t,i){var u,r,f;return u=moment(n),f=moment(new Date)>u,r=$.fn.fmatter.dateNative(n,t,i),f||(r="<span class='blue'>"+r+"<\/span>"),r},$.fn.fmatter.withScrollbar=function(n){var t;return t=n.text||n,"<div style='overflow: auto; width: auto'>"+t+"<\/div>"},$.fn.fmatter.ColorCell=function(n){var t;return t=n.text||n,"<span class='coloredCell'>"+t+"<\/span>"}}).call(this);
//# sourceMappingURL=ezbob.underwriter.customerGrid.min.js.map