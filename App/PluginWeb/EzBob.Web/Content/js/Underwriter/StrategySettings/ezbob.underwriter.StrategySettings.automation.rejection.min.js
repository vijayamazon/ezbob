(function(){var n,i={}.hasOwnProperty,t=function(n,t){function u(){this.constructor=n}for(var r in t)i.call(t,r)&&(n[r]=t[r]);return u.prototype=t.prototype,n.prototype=new u,n.__super__=t.prototype,n};n=typeof exports!="undefined"&&exports!==null?exports:this;n.EzBob=n.EzBob||{};EzBob.Underwriter=EzBob.Underwriter||{};EzBob.Underwriter.SettingsRejectionModel=function(n){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,n),i.prototype.url=window.gRootPath+"Underwriter/StrategySettings/AutomationRejection",i}(Backbone.Model);EzBob.Underwriter.SettingsRejectionView=function(n){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,n),i.prototype.template="#rejection-settings-template",i.prototype.initialize=function(){this.modelBinder=new Backbone.ModelBinder;this.model.on("reset",this.render,this);return this.update(),this},i.prototype.bindings={EnableAutomaticRejection:"select[name='EnableAutomaticRejection']",LowCreditScore:"input[name='LowCreditScore']",TotalAnnualTurnover:"input[name='TotalAnnualTurnover']",TotalThreeMonthTurnover:"input[name='TotalThreeMonthTurnover']",Reject_Defaults_CreditScore:"input[name='Reject_Defaults_CreditScore']",Reject_Defaults_AccountsNum:"input[name='Reject_Defaults_AccountsNum']",Reject_Defaults_Amount:"input[name='Reject_Defaults_Amount']",Reject_Defaults_MonthsNum:"input[name='Reject_Defaults_MonthsNum']",Reject_Minimal_Seniority:"input[name='Reject_Minimal_Seniority']",EnableAutomaticReRejection:"select[name='EnableAutomaticReRejection']",AutoRejectionException_CreditScore:"input[name='AutoRejectionException_CreditScore']",AutoRejectionException_AnualTurnover:"input[name='AutoRejectionException_AnualTurnover']",Reject_LowOfflineAnnualRevenue:"input[name='Reject_LowOfflineAnnualRevenue']",Reject_LowOfflineQuarterRevenue:"input[name='Reject_LowOfflineQuarterRevenue']",Reject_LateLastMonthsNum:"input[name='Reject_LateLastMonthsNum']",Reject_NumOfLateAccounts:"input[name='Reject_NumOfLateAccounts']"},i.prototype.events={"click button[name='SaveRejectionSettings']":"saveSettings","click button[name='CancelRejectionSettings']":"cancelSettings"},i.prototype.saveSettings=function(){if(this.validator.form())return BlockUi("on"),this.model.save().done(function(){return EzBob.ShowMessage("Saved successfully","Successful")}),this.model.save().complete(function(){return BlockUi("off")}),!1},i.prototype.update=function(){var n,t=this;return n=this.model.fetch(),n.done(function(){return t.render()})},i.prototype.cancelSettings=function(){return this.update(),!1},i.prototype.onRender=function(){return this.modelBinder.bind(this.model,this.el,this.bindings),$("body").hasClass("role-manager")||(this.$el.find("select, input").addClass("disabled").attr({readonly:"readonly",disabled:"disabled"}),this.$el.find("button").hide()),this.setValidator()},i.prototype.show=function(){return this.$el.show()},i.prototype.hide=function(){return this.$el.hide()},i.prototype.onClose=function(){return this.modelBinder.unbind()},i.prototype.setValidator=function(){return this.validator=this.$el.find("form").validate({onfocusout:function(){return!0},onkeyup:function(){return!1},onclick:function(){return!1},rules:{LowCreditScore:{required:!0,min:0},TotalAnnualTurnover:{required:!0,min:0},TotalThreeMonthTurnover:{required:!0,min:0},Reject_Defaults_CreditScore:{required:!0,min:0},Reject_Defaults_AccountsNum:{required:!0,min:0},Reject_Defaults_Amount:{required:!0,min:0},Reject_Defaults_MonthsNum:{required:!0,min:0},Reject_Minimal_Seniority:{required:!0,min:0},AutoRejectionException_CreditScore:{required:!0,min:0},AutoRejectionException_AnualTurnover:{required:!0,min:0},Reject_LowOfflineAnnualRevenue:{required:!0,min:0},Reject_LowOfflineQuarterRevenue:{required:!0,min:0},Reject_LateLastMonthsNum:{required:!0,min:0},Reject_NumOfLateAccounts:{required:!0,min:0}}})},i}(Backbone.Marionette.ItemView)}).call(this)