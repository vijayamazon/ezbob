(function(){var t,i={}.hasOwnProperty,n=function(n,t){function u(){this.constructor=n}for(var r in t)i.call(t,r)&&(n[r]=t[r]);return u.prototype=t.prototype,n.prototype=new u,n.__super__=t.prototype,n};t=typeof exports!="undefined"&&exports!==null?exports:this;t.EzBob=t.EzBob||{};EzBob.Underwriter=EzBob.Underwriter||{};EzBob.Underwriter.FraudModel=function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return n(i,t),i.prototype.defaults=function(){return{FirstName:"",LastName:"",Addresses:[],Phones:[],Emails:[],EmailDomains:[],BankAccounts:[],Companies:[],Shops:[]}},i.prototype.sendToServer=function(){var n,t=this;return n=Backbone.sync("create",this,{url:""+gRootPath+"Underwriter/Fraud/AddNewUser"}),n.complete(function(){return t.trigger("saved")})},i}(Backbone.Model);EzBob.Underwriter.FraudModels=function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return n(i,t),i.prototype.url=""+gRootPath+"Underwriter/Fraud/GetAll",i.prototype.model=EzBob.Underwriter.FraudModel,i}(Backbone.Collection);EzBob.Underwriter.simpleValueAddView=function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return n(i,t),i.prototype.initialize=function(n){return this.template=n.template,this.type=n.type},i.prototype.events={"click .ok":"okClicked"},i.prototype.ui={form:"form"},i.prototype.onRender=function(){return this.type!=="Addresses"&&this.ui.form.find("input, textarea").addClass("required"),this.validator=this.ui.form.validate({errorPlacement:EzBob.Validation.errorPlacement,unhighlight:EzBob.Validation.unhighlight}),this},i.prototype.okClicked=function(){var n;if(this.validator.form())return n=new Backbone.Model(SerializeArrayToEasyObject(this.ui.form.serializeArray())),this.trigger("added",{model:n,type:this.type}),this.close(),!1},i}(Backbone.Marionette.ItemView);EzBob.Underwriter.SimpleValueView=function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return n(i,t),i.prototype.initialize=function(n){return this.template=n.template},i.prototype.serializeData=function(){return{models:this.model}},i}(Backbone.Marionette.ItemView);EzBob.Underwriter.AddEditFraudView=function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return n(i,t),i.prototype.template="#fraud-add-edit-template",i.prototype.jqoptions=function(){return{modal:!0,resizable:!1,title:"Fraud",position:"center",draggable:!1,width:"73%",height:Math.max(window.innerHeight*.9,600),dialogClass:"fraud-popup"}},i.prototype.ui={form:"form"},i.prototype.onRender=function(){return this.ui.form.find("input, textarea").addClass("required"),this.validator=this.ui.form.validate({errorPlacement:EzBob.Validation.errorPlacement,unhighlight:EzBob.Validation.unhighlight})},i.prototype.events={"click .save":"saveButtonClicked","click .add":"addClicked","click .remove":"removeClicked"},i.prototype.removeClicked=function(n){var t,r,i;return t=$(n.currentTarget),r=t.data("index"),i=t.data("type"),this.model.get(i).splice(r,1),this.reRenderArea(i),!1},i.prototype.saveButtonClicked=function(){var n,t;if(t=this.validator.form(),!t){this.ui.form.closest(".modal-body").animate({scrollTop:0},500);return}return n=SerializeArrayToEasyObject(this.ui.form.serializeArray()),this.model.set({FirstName:n.FirstName,LastName:n.LastName}),this.model.sendToServer(),this.close()},i.prototype.addClicked=function(n){var r,u,t,i;r=$(n.currentTarget);t=r.data("type");u="#add-"+t+"-template";i=new EzBob.Underwriter.simpleValueAddView({template:u,type:t});EzBob.App.modal2.show(i);i.on("added",this.simpleValueAdded,this);return!1},i.prototype.simpleValueAdded=function(n){return this.model.get(n.type).push(n.model.toJSON()),this.reRenderArea(n.type),!1},i.prototype.reRenderArea=function(n){var t;return t=this.$el.find("."+n),new EzBob.Underwriter.SimpleValueView({template:"#"+n+"-template",el:t,model:this.model.get(n)}).render()},i}(Backbone.Marionette.ItemView);EzBob.Underwriter.FraudView=function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return n(i,t),i.prototype.template="#fraud-template",i.prototype.initialize=function(){this.model=new EzBob.Underwriter.FraudModels;this.model.on("change reset",this.render,this);return this.model.fetch()},i.prototype.events={"click .add":"addButtonClicked","click .all":"allClicked"},i.prototype.allClicked=function(){var n,t,i=this;if(BlockUi("on"),n=prompt("Customer Id"),n)return t=$.get(""+gRootPath+"Underwriter/Fraud/RunCheck",{id:n}),t.complete(function(n){return i.showData(n.responseText),BlockUi("off")})},i.prototype.showData=function(n){var t;return t=$("<div/>").html("<table class='table table-bordered'><tr><td>Check Type<\/td><td>Current Field<\/td><td>Compare Field<\/td><td>Value<\/td><td>Concurrence<\/td><\/tr>"+n+"<\/table>"),t.dialog({width:"75%",height:600})},i.prototype.serializeData=function(){return{data:this.model.toJSON()}},i.prototype.addButtonClicked=function(){var n,t,i=this;n=new EzBob.Underwriter.FraudModel;t=new EzBob.Underwriter.AddEditFraudView({model:n});t.modalOptions={show:!0,keyboard:!1,width:600,height:600};EzBob.App.modal.jqshow(t);n.on("saved",function(){return i.model.fetch()});return!1},i.prototype.show=function(){return this.$el.show()},i.prototype.hide=function(){return this.$el.hide()},i}(Backbone.Marionette.ItemView)}).call(this)