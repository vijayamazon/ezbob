(function(){var n,i={}.hasOwnProperty,t=function(n,t){function u(){this.constructor=n}for(var r in t)i.call(t,r)&&(n[r]=t[r]);return u.prototype=t.prototype,n.prototype=new u,n.__super__=t.prototype,n};n=typeof exports!="undefined"&&exports!==null?exports:this;n.EzBob=n.EzBob||{};EzBob.Underwriter=EzBob.Underwriter||{};EzBob.Underwriter.ReportModel=function(n){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,n),i.prototype.url=""+gRootPath+"Underwriter/Report/GetAll",i}(Backbone.Model);EzBob.Underwriter.ReportView=function(n){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,n),i.prototype.template="#report-template",i.prototype.initialize=function(){this.model=new EzBob.Underwriter.ReportModel;this.model.on("change reset",this.render,this);return this.model.fetch()},i.prototype.ui={reportsDdl:"#reportsDdl",datesDdl:"#datesDdl",reportArea:"#reportDiv"},i.prototype.serializeData=function(){return{reports:this.model.toJSON()}},i.prototype.events={"change #reportsDdl":"reportChanged","click #getReportBtn":"getReportClicked","click #downloadReportBtn":"downloadReportClicked"},i.prototype.onRender=function(){return this.ui.reportsDdl.chosen(),this.ui.datesDdl.chosen()},i.prototype.reportChanged=function(){return console.log("report changed")},i.prototype.downloadReportClicked=function(){return(console.log("download clicked"),this.ui.reportsDdl.val()==="0"||this.ui.datesDdl.val()==="0")?(alertify.error("Select report and/or date range"),!1):window.location=""+window.gRootPath+"Underwriter/Report/DownloadReport/?reportId="+this.ui.reportsDdl.val()+"&reportDate="+this.ui.datesDdl.val()},i.prototype.getReportClicked=function(){var n,t=this;return this.ui.reportsDdl.val()==="0"||this.ui.datesDdl.val()==="0"?(alertify.error("Select report and/or date range"),!1):(n=$.post(""+window.gRootPath+"Underwriter/Report/GetReport",{reportId:this.ui.reportsDdl.val(),reportDate:this.ui.datesDdl.val()}),n.done(function(n){if(n.report!=null)return t.ui.reportArea.html(n.report),t.formatTable(n.columns)}))},i.prototype.formatTable=function(n){var t;return $("#tableReportData").addClass("table table-bordered table-striped blue-header centered"),t={aLengthMenu:[[10,25,50,100,200,-1],[10,25,50,100,200,"All"]],iDisplayLength:100,aaSorting:[],aoColumns:n},$("#tableReportData").dataTable(t)},i.prototype.show=function(){return this.$el.show()},i.prototype.hide=function(){return this.$el.hide()},i}(Backbone.Marionette.ItemView)}).call(this)