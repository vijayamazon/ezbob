(function(){var t,i={}.hasOwnProperty,n=function(n,t){function u(){this.constructor=n}for(var r in t)i.call(t,r)&&(n[r]=t[r]);return u.prototype=t.prototype,n.prototype=new u,n.__super__=t.prototype,n};t=typeof exports!="undefined"&&exports!==null?exports:this;t.EzBob=t.EzBob||{};EzBob.Underwriter.DocModel=function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return n(i,t),i}(Backbone.Model);EzBob.Underwriter.Docs=function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return n(i,t),i.prototype.model=EzBob.Underwriter.DocModel,i.prototype.url=function(){return""+window.gRootPath+"Underwriter/AlertDocs/List/"+this.customerId},i}(Backbone.Collection);EzBob.Underwriter.UploadDocView=function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return n(i,t),i.prototype.template="#uploadAlertDocDialog",i.prototype.initialize=function(n){return this.customerId=n.customerId},i.prototype.jqoptions=function(){return{modal:!0,resizable:!1,title:"Upload Doc",position:"center",draggable:!1,width:530,dialogClass:"upload-doc-popup"}},i.prototype.events={"click .button-upload":"upload"},i.prototype.upload=function(n){var t,i=this;if(!$(n.currentTarget).hasClass("disabled")){if($(n.currentTarget).addClass("disabled"),t=this.$el.find('input[type="file"]')[0],typeof t.files!="undefined"&&t.files.length===0||!t.value){EzBob.ShowMessage("Please select a file!","Warning");$(n.currentTarget).removeClass("disabled");return}return this.$el.find("#fileForm").find("input[name=CustomerId]").val(this.customerId),this.$el.find("#fileForm").ajaxSubmit({cache:!1,success:function(){return i.trigger("upload:ok"),i.close()},error:function(){return EzBob.ShowMessage("Upload failed, possible cause may be big file size (use smaller file) or session time out.","Error"),$(n.currentTarget).removeClass("disabled")}})}},i}(Backbone.Marionette.ItemView);EzBob.Underwriter.AlertDocsView=function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return n(i,t),i.prototype.root=window.gRootPath+"Underwriter/AlertDocs/",i.prototype.template="#docs-template",i.prototype.customerId=0,i.prototype.dialogId="null",i.prototype.events={"click #addNewDoc":"addClick","click #deleteDocs":"deleteClick"},i.prototype.initialize=function(){return this.bindTo(this.model,"change reset fetch sync",this.render,this)},i.prototype.create=function(n){return this.customerId=n,this.dialogId="#uploadAlertDocDialog"+n,this.model.customerId=n,console.log("@alertDocs",this.model)},i.prototype.serializeData=function(){return{docs:this.model.toJSON()}},i.prototype.addClick=function(){var t,n;n=new EzBob.Underwriter.UploadDocView({customerId:this.customerId});t=function(){return this.model.fetch(),EzBob.ShowMessage('File successfully downloaded to "Messages" tab',"Successful")};n.on("upload:ok",t,this);return EzBob.App.jqmodal.show(n)},i.prototype.deleteClick=function(){var t,n,i=this;if(n=function(){var n,u,i,r;for(i=this.$el.find('input[type="checkbox"]:checked'),r=[],n=0,u=i.length;n<u;n++)t=i[n],r.push($(t).data("id"));return r}.call(this),n.length===0){EzBob.ShowMessage("Please select at least one document to delete.","Warning");return}return EzBob.ShowMessage("Are you sure you want to delete selected docs?","",function(){var t;return t=$.ajax({type:"POST",traditional:!0,url:""+i.root+"DeleteDocs",data:{docIds:n},dataType:"json"}),t.done(function(){return i.model.fetch(),EzBob.ShowMessage("File successfully deleted","Successful")})},"OK",null,"Cancel"),!1},i}(Backbone.Marionette.ItemView)}).call(this)