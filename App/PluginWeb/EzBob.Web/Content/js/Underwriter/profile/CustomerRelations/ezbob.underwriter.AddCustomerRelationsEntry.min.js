(function(){var n,t={}.hasOwnProperty,i=function(n,i){function u(){this.constructor=n}for(var r in i)t.call(i,r)&&(n[r]=i[r]);return u.prototype=i.prototype,n.prototype=new u,n.__super__=i.prototype,n};n=typeof exports!="undefined"&&exports!==null?exports:this;n.EzBob=n.EzBob||{};EzBob.Underwriter=EzBob.Underwriter||{};EzBob.Underwriter.AddCustomerRelationsEntry=function(n){function t(){return t.__super__.constructor.apply(this,arguments)}return i(t,n),t.prototype.template="#add-customer-relations-entry-template",t.prototype.events={"keyup textarea":"commentKeyup"},t.prototype.jqoptions=function(){return{modal:!0,resizable:!1,title:"CRM",position:"center",draggable:!1,width:"73%",height:Math.max(window.innerHeight*.9,600),dialogClass:"customer-relations-popup"}},t.prototype.initialize=function(n){return this.model=new Backbone.Model({actions:n.actions,statuses:n.statuses}),this.mainTab=n.mainTab,t.__super__.initialize.call(this)},t.prototype.render=function(){return t.__super__.render.call(this),this.$el.find("#Action").prop("selectedIndex",1),this},t.prototype.commentKeyup=function(n){return $(n.target).val($(n.target).val().replace(/\r\n|\r|\n/g,"\r\n").slice(0,1e3))},t.prototype.onSave=function(){var t,n,i=this;return!$("#Incoming_I")[0].checked&&!$("#Incoming_O")[0].checked?!1:$("#Status")[0].selectedIndex===0?!1:$("#Action")[0].selectedIndex===0?!1:(BlockUi("on"),t=this,n=$.post(""+window.gRootPath+"Underwriter/CustomerRelations/SaveEntry/",{isIncoming:$("#Incoming_I")[0].checked,action:$("#Action")[0].value,status:$("#Status")[0].value,comment:$("#Comment").val(),customerId:this.mainTab.model.customerId}),n.done(function(n){if(n.error!=null){EzBob.ShowMessage(n.error,"Error");return}return t.mainTab.model.fetch(),i.close()}),n.complete(function(){return BlockUi("off")}),!1)},t}(EzBob.BoundItemView)}).call(this)