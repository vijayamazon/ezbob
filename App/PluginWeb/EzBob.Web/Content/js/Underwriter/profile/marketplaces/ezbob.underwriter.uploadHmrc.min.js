(function(){var n,t={}.hasOwnProperty,i=function(n,i){function u(){this.constructor=n}for(var r in i)t.call(i,r)&&(n[r]=i[r]);return u.prototype=i.prototype,n.prototype=new u,n.__super__=i.prototype,n};n=typeof exports!="undefined"&&exports!==null?exports:this;n.EzBob=n.EzBob||{};EzBob.Underwriter=EzBob.Underwriter||{};EzBob.Underwriter.UploadHmrcView=function(n){function t(){return t.__super__.constructor.apply(this,arguments)}return i(t,n),t.prototype.template="#hmrc-upload-template",t.prototype.initialize=function(n){return this.customerId=n.customerId},t.prototype.ui={hmrcUploadZone:"#hmrcUploadZone",uploadHmrcButton:".uploadHmrc"},t.prototype.events={"click .uploadHmrc":"uploadHmrcClicked","click .back":"backClicked"},t.prototype.serializeData=function(){return{customerId:this.customerId}},t.prototype.onRender=function(){var n;return n=this,Dropzone.options.hmrcUploadZone={init:function(){return this.on("complete",function(){var t;if(this.getUploadingFiles().length===0&&this.getQueuedFiles().length===0)return t=this.getAcceptedFiles()!==0,n.ui.uploadHmrcButton.toggleClass("disabled",!t)})}},this.ui.hmrcUploadZone.dropzone(),this},t.prototype.uploadHmrcClicked=function(){var t,n;return this.ui.uploadHmrcButton.hasClass("disabled")?!1:(t=this,BlockUi("on"),n=$.post(window.gRootPath+"UploadHmrc/UploadFiles",{customerId:this.customerId}),n.done(function(n){return n.error!==void 0?EzBob.App.trigger("error","Failed to Save HMRC Account"):EzBob.App.vent.trigger("ct:marketplaces.history",null)}),n.always(function(){return BlockUi("off")}))},t.prototype.backClicked=function(){return EzBob.App.vent.trigger("ct:marketplaces.uploadHmrcBack")},t}(Backbone.Marionette.ItemView)}).call(this)