(function(){var n,t={}.hasOwnProperty,i=function(n,i){function u(){this.constructor=n}for(var r in i)t.call(i,r)&&(n[r]=i[r]);return u.prototype=i.prototype,n.prototype=new u,n.__super__=i.prototype,n};n=typeof exports!="undefined"&&exports!==null?exports:this;n.EzBob=n.EzBob||{};EzBob.Underwriter=EzBob.Underwriter||{};EzBob.Underwriter.RolloverView=function(n){function t(){return t.__super__.constructor.apply(this,arguments)}return i(t,n),t.prototype.initialize=function(){var t,n,r,i;for(this.template=_.template($("#payment-rollover-template").html()),this.model.hasActive=!1,i=this.model.rollover,n=0,r=i.length;n<r;n++)if(t=i[n],t.Status===0)return this.model.hasActive=!0,this.model.rollover=t,null;return this},t.prototype.jqoptions=function(){return{modal:!0,resizable:!1,title:"Rollover",position:"center",draggable:!1,dialogClass:"rollover-popup",width:600}},t.prototype.events={"click .confirm":"addRollover","click .remove":"removeRollover","change [name='ExperiedDate']":"updatePaymentData"},t.prototype.render=function(){return this.model.title=this.model.hasActive?"Edit roll over":"Add roll over",this.$el.html(this.template({model:this.model})),this.$el.find(".ezDateTime").splittedDateTime(),this.form=this.$el.find("#rollover-dialog"),this.validator=EzBob.validateRollover(this.form),this.model.hasActive&&SetDefaultDate(this.$el.find("#ExperiedDate"),this.model.rollover.ExpiryDate),this.$el.find('select[name="ScheduleId"]').change(),this.updatePaymentData(),this},t.prototype.addRollover=function(){var n;return this.validator.form()?(n=this.form.find(":input:disabled").removeAttr("disabled"),this.trigger("addRollover",this.form.serializeArray()),n.attr("disabled","disabled"),!0):!1},t.prototype.removeRollover=function(){var n;return n=this.$el.find('input[name="rolloverId"]'),this.trigger("removeRollover",n)},t.prototype.updatePaymentData=function(){var t,i,n=this;return t={loanId:this.model.loanId,isEdit:this.model.hasActive},i=$.get(window.gRootPath+"Underwriter/LoanHistory/GetRolloverInfo",t),i.done(function(t){if(!t.error)return n.$el.find("#Payment").val(t.rolloverAmount),n.$el.find("#interest").val(t.interest),n.$el.find("#lateFees").val(t.lateCharge),n.$el.find("#MounthCount").val(t.mounthAmount)})},t}(Backbone.View)}).call(this)