(function(){var n,t={}.hasOwnProperty,i=function(n,i){function u(){this.constructor=n}for(var r in i)t.call(i,r)&&(n[r]=i[r]);return u.prototype=i.prototype,n.prototype=new u,n.__super__=i.prototype,n};n=typeof exports!="undefined"&&exports!==null?exports:this;n.EzBob=n.EzBob||{};EzBob.Underwriter=EzBob.Underwriter||{};EzBob.Underwriter.ManualPaymentView=function(n){function t(){return t.__super__.constructor.apply(this,arguments)}return i(t,n),t.prototype.template="#manualPayment-template",t.prototype.jqoptions=function(){return{modal:!0,resizable:!1,title:"Manual Payment",position:"center",draggable:!1,width:"73%",height:Math.max(window.innerHeight*.9,600),dialogClass:"manual-payment-popup"}},t.prototype.onRender=function(){return this.$el.find(".ezDateTime").splittedDateTime(),this.validator=EzBob.validatemanualPaymentForm(this.ui.form),this.minAmount=.1,this.maxAmount=0,this.updatePaymentData(),this},t.prototype.events={"click .confirm":"confirmClicked","click .uploadFiles":"uploadFilesClicked","change [name='totalSumPaid']":"updatePaymentData","change [name='paymentDate']":"updatePaymentData"},t.prototype.ui={form:"#payment-form",money:"[name='totalSumPaid']",date:"[name='paymentDate']",fees:"[name='fees']",interest:"[name='interest']",principal:"[name='principal']"},t.prototype.confirmClicked=function(){return this.validator.form()?(this.trigger("addPayment",this.ui.form.serialize()),this.close()):!1},t.prototype.uploadFilesClicked=function(){return $("#addNewDoc").click(),!1},t.prototype.updatePaymentData=function(){var t,i,n=this;return t={date:this.ui.date.val(),money:ValueOrDefault(this.ui.money.val(),0),loanId:this.model.get("loanId")},i=$.get(window.gRootPath+"Underwriter/LoanHistory/GetPaymentInfo",t),i.done(function(t){var i;if(!t.error)return n.ui.fees.val(t.Fee),n.ui.principal.val(t.Principal),n.ui.interest.val(t.Interest),n.ui.money.val(t.Amount),n.minAmount=t.MinValue,n.maxAmount=t.Balance,i="Minium value = "+n.minAmount+", maximum value = "+n.maxAmount,n.ui.money.attr("data-original-title",i),n.ui.money.tooltip({trigger:"hover",title:i}),n.ui.money.tooltip("enable").tooltip("fixTitle")})},t}(Backbone.Marionette.ItemView)}).call(this)