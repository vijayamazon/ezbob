(function(){var n,r={}.hasOwnProperty,i=function(n,t){function u(){this.constructor=n}for(var i in t)r.call(t,i)&&(n[i]=t[i]);return u.prototype=t.prototype,n.prototype=new u,n.__super__=t.prototype,n},t=function(n,t){return function(){return n.apply(t,arguments)}};n=typeof exports!="undefined"&&exports!==null?exports:this;n.EzBob=n.EzBob||{};EzBob.Underwriter=EzBob.Underwriter||{};EzBob.Underwriter.LoanOptionsModel=function(n){function t(){return t.__super__.constructor.apply(this,arguments)}return i(t,n),t.prototype.urlRoot=function(){return""+window.gRootPath+"Underwriter/LoanOptions/Index?loanId="+this.loanId},t}(Backbone.Model);EzBob.Underwriter.LoanOptionsView=function(n){function r(){return this.onSave=t(this.onSave,this),this.onCancel=t(this.onCancel,this),this.changeAccountStatus=t(this.changeAccountStatus,this),r.__super__.constructor.apply(this,arguments)}return i(r,n),r.prototype.template="#loan-options-template",r.prototype.jqoptions=function(){return{modal:!0,resizable:!1,title:"Loan Options",position:"center",draggable:!1,width:"73%",height:Math.max(window.innerHeight*.9,600),dialogClass:"loan-options-popup"}},r.prototype.initialize=function(){return this.loanOptions=new Backbone.Model(this.model.get("Options")),this.modelBinder=new Backbone.ModelBinder,this},r.prototype.bindings={Id:{selector:"input[name='Id']"},LoanId:{selector:"input[name='LoanId']"},AutoPayment:{selector:"input[name='AutoPayment']"},ReductionFee:{selector:"input[name='ReductionFee']"},LatePaymentNotification:{selector:"input[name='LatePaymentNotification']"},StopSendingEmails:{selector:"input[name='StopSendingEmails']"}},r.prototype.events={"change #cais-flags":"changeFlags","change #CaisAccountStatus":"changeAccountStatus","click .btnOk":"onSave"},r.prototype.changeFlags=function(){var n,t;return this.loanOptions.set("ManulCaisFlag",this.$el.find("#cais-flags option:selected").val()),t=this.$el.find("#cais-flags option:selected").attr("data-id"),n=this.model.get("ManualCaisFlags")[t],this.$el.find(".cais-comment").html("<h5>"+n.ValidForRecordType+"<\/h5>"+n.Comment)},r.prototype.changeAccountStatus=function(){var n;return n=$("#CaisAccountStatus option:selected").val(),n==="8"?$("#defaultExplanation").show():$("#defaultExplanation").hide(),this.loanOptions.set("CaisAccountStatus",$("#CaisAccountStatus option:selected").val())},r.prototype.save=function(){var n,t,i;return t=this.loanOptions.toJSON(),n=""+window.gRootPath+"Underwriter/LoanOptions/Save",i=$.post(n,t),!1},r.prototype.onCancel=function(){return this.close()},r.prototype.onSave=function(){return this.save(),this.close()},r.prototype.onRender=function(){return this.modalOptions={show:!0,keyboard:!1,width:700},this.modelBinder.bind(this.loanOptions,this.el,this.bindings),this.$el.find("#CaisAccountStatus option[value='"+this.loanOptions.get("CaisAccountStatus")+"']").attr("selected","selected"),this.$el.find("#cais-flags option[value='"+this.loanOptions.get("ManulCaisFlag")+"']").attr("selected","selected"),this.changeFlags()},r}(Backbone.Marionette.ItemView)}).call(this)