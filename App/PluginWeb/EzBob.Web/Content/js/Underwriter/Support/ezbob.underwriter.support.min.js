(function(){var n,i={}.hasOwnProperty,t=function(n,t){function u(){this.constructor=n}for(var r in t)i.call(t,r)&&(n[r]=t[r]);return u.prototype=t.prototype,n.prototype=new u,n.__super__=t.prototype,n};n=typeof exports!="undefined"&&exports!==null?exports:this;n.EzBob=n.EzBob||{};EzBob.Underwriter=EzBob.Underwriter||{};EzBob.Underwriter.SupportView=function(n){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,n),i.prototype.initialize=function(){this.model=new EzBob.Underwriter.SupportModel;this.model.on("change reset",this.render,this);return this.model.fetch(),this.preHeight=20},i.prototype.template="#support-template",i.prototype.events={"click pre":"preClicked","click .reCheckMP":"recheckClicked","click [data-sort-type]":"sortClicked"},i.prototype.onRender=function(){var n;return this.$el.find("[data-sort-type]").css("cursor","pointer"),this.$el.find("pre").tooltip({title:"Click to see detail info"}).tooltip("fixTitle"),this.$el.find("pre").height(this.preHeight).css("overflow","hidden").css("cursor","pointer"),this.$el.find(".arrow").hide(),n=this.$el.find("[data-sort-type="+this.model.get("sortField")+"] .arrow"),n.show(),n.removeClass().addClass(this.model.get("sortType")==="asc"?"arrow icon-arrow-up":"arrow icon-arrow-down"),BlockUi("off"),EzBob.handleUserLayoutSetting()},i.prototype.sortClicked=function(n){var i,r,u,t;return BlockUi("on"),i=$(n.currentTarget),t=i.data("sort-type"),r=this.model.get("sortField"),u=this.model.get("sortType"),this.model.set({sortField:t,sortType:t!==r||u==="desc"?"asc":"desc"},{silent:!0}),this.model.fetch()},i.prototype.recheckClicked=function(n){var t,r,u,f,i,e=this;return(t=$(n.currentTarget),t.hasClass("disabled"))?!1:(i=t.attr("umi"),u=t.attr("marketplaceType"),r=this.model.customerId,f=function(){var n;return t.addClass("disabled"),n=$.get(""+window.gRootPath+"Underwriter/MarketPlaces/ReCheckMarketplaces",{customerId:r,umi:i,marketplaceType:u}),n.done(function(n){return n&&n.error!==void 0?EzBob.ShowMessage(n.error,"Error occured"):EzBob.ShowMessage("Wait a few minutes","The marketplace recheck is running. ",null,"OK"),e.trigger("rechecked",{umi:i,el:t})}),n.fail(function(n){return console.error(n.responseText)})},EzBob.ShowMessage("","Are you sure?",f,"Yes",null,"No"),!1)},i.prototype.preClicked=function(n){var t,i;return t=$(n.currentTarget),i=t.height(),t.height(i!==this.preHeight?this.preHeight:"auto"),t.tooltip("destroy"),t.tooltip({title:i!==this.preHeight?"Click to see detail info":"Click to hide detail info"}),t.tooltip("enable").tooltip("fixTitle")},i.prototype.hide=function(){return this.$el.hide(),clearInterval(this.modelUpdater),BlockUi("off")},i.prototype.show=function(){var n=this;return this.$el.show(),this.modelUpdater=setInterval(function(){return n.model.fetch()},2e3)},i.prototype.serializeData=function(){return{model:this.model.get("models")}},i}(Backbone.Marionette.ItemView);EzBob.Underwriter.SupportModel=function(n){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,n),i.prototype.initialize=function(){return this.set({sortField:4,sortType:"desc",models:[]},{silent:!0})},i.prototype.urlRoot=function(){return""+gRootPath+"Underwriter/Support/Index?sortField="+this.get("sortField")+"&sortType="+this.get("sortType")},i}(Backbone.Model)}).call(this)