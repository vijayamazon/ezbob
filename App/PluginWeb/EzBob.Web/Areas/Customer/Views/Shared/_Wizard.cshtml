@using EzBob.Web.Infrastructure
@model dynamic
<script type="text/template" id="wizard-template">
    <div class="wizard-progress"></div>

    <div class="vip-container"></div>

    <section id="content">
        <div class="row-fluid notifications"></div>
        <div class='pages'></div>
    </section>
    <aside class="customer-sidebar wizard">
        @{Html.RenderPartial("~/Areas/Customer/Views/Shared/SideBars/_Sidebar.cshtml");}
    </aside>
    <div class="clear" />
</script>

<script type="text/template" id="progress-indicator">
    <div class="wizard-steps">
        <div class="progress-time"><span>Just <span class="progress-time-remainig"><%=progress%> minutes</span> to complete your application</span></div>
        <ul class="application_steps">
            <%(function() {
                    var nVisibleStepNum = 0;
                    var last = steps.length - 1;

                    _.each(steps, function(step, i) {
                        var css = '';
                        var lastcss = '';

                        if (i == current) css += 'current';

                        if (i < current) css += 'complete';

                        if (progress == 100) css = 'complete';

                        if (i == last) lastcss = 'last';

                        if (step.showTitleInWizardSteps) nVisibleStepNum++; else css += 'hide';
            %>
            <li class="<%- css %> <%-lastcss%>" data-step-num="<%= step.num %>">
                <span class="step_label"><% print(step.title) %></span>
                <div class="progress-circle @*timer fill*@">
                    <div class="percent"><%=(i+1)%></div>
                </div>
                <div class="progress-line">
                    <div class="progress-line-<%-css%>"></div>
                </div>
            </li>
            <%}); // for each step
                })(); // inline function - local scope
            %>
        </ul>
    </div>

    @{
        var blm = new WizardBrokerLeadModel(Session);

        if (blm.BrokerFillsForCustomer)
        {
        <div class="broker-finish-wizard-later">
            <div>Dear Broker,</div>
            <div>
                You are filling the loan application forms for your customer, @blm.FirstName @blm.LastName.
            </div>
            <div class="button-container">
                For any assistance, please contact us.
                <button class="green" title="Click to finish sign up process later and return to dashboard.">Finish later</button>
            </div>
        </div>
        }
    }
</script>

<script type="text/template" id="vip-template">
    <div class="vip-main">
        <div class="vip-image vip-box"></div>
        <div class="vip-text vip-box">
            <h4>Want VIP service?</h4>
            <h4>Just press the request callback</h4>
            <h4>We will guide you through the application</h4>
        </div>
        <div class="vip-button">
            <button type="button" class="rc-button green vip-req-button vip_help" id="vipRequestBtn" ui-event-control-id="vip:request-callback">Request callback</button>
        </div>

        <div class="hide">
            <div id="vip_help" class="help_window">
                <h2>Enter your contact info</h2>
                <br />
                <form id="vip-form">
                    @EzForm.InputText("VipFullName", "Full name", cls: "form_field", isRequired: true, statusIcon: true, uiEventControlID: "vip:fullname", maxLength: 50)
                    @EzForm.InputText("VipEmail", "Email", cls: "form_field", isRequired: true, statusIcon: true, uiEventControlID: "vip:email", type: "email", maxLength: 300)
                    @EzForm.InputText("VipPhone", "Phone", cls: "form_field", isRequired: true, statusIcon: true, uiEventControlID: "vip:phone", maxLength: 11)
                </form>
                <div class="form_buttons_container">
                    <div class="attardi-button">
                        <a href="#" class="button orange pull-right" id="requestVipBtn" ui-event-control-id="vip:continue" onclick="EzBob.App.trigger('wizard:vipRequest', $('#vip-form').serializeArray());$.colorbox.close();">Continue</a>
                        <a href="#" class="button grey pull-right" id="cancelVipBtn" onclick="$.colorbox.close();" ui-event-control-id="vip:cancel">Cancel</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</script>
