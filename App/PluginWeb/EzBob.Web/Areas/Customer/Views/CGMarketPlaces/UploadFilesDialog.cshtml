@{ Layout = ""; }
<!DOCTYPE html>
<html>
<head>
	<title>Upload</title>

	<script>
		function Body_OnLoad() {
			document.getElementById('ok').onclick = function () {
				document.getElementById('model').value = JSON.stringify(window.parent[document.getElementById('modelkey').value]());
				document.getElementById('upload').submit();
			};

			document.getElementById('cancel').onclick = function() {
				var oResult = { error: '' };

				window.parent.@{ WriteLiteral(ViewData["key"]); }(JSON.stringify(oResult));
			};
		} // Body_OnLoad
	</script>
	
	<link rel="stylesheet" href="../../../../Content/css/style.css" />
	<link rel="stylesheet" href="../../../../Content/css/bootstrap.css" />
	
	<style>
		body.popup { padding: 1em; }
		.upload-file-name { display: block; margin-bottom: 1.6em; }
	</style>
</head>

<body onload="Body_OnLoad()" class="popup">
	<input type="hidden" id="modelkey" value="@{ WriteLiteral(ViewData["modelkey"]); }" />

	<h4>Upload up to five files</h4>

	<form id=upload action="@{ WriteLiteral(ViewData["handler"]); }" method="POST" enctype="multipart/form-data">
		<input type="file" name="file0" class="upload-file-name" />
		<input type="file" name="file1" class="upload-file-name" />
		<input type="file" name="file2" class="upload-file-name" />
		<input type="file" name="file3" class="upload-file-name" />
		<input type="file" name="file4" class="upload-file-name" />

		<input type=hidden name=key id=key value="@ViewData["key"]" />

		<input type="hidden" name="model" id="model" />

		<button id="cancel" class="button grey pull-right">Cancel</button>
		<button id="ok" class="orange button pull-right">Submit files</button>
	</form>
</body>
</html>
