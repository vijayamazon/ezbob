@model dynamic

<script id="profile-head-template" type="text/template">
    <div class="row">
        <div class="col-md-12">
            <%if(loan){ %>
        <div class="col-md-12 col-lg-6">
            <div class="box">
                <div class="box-title">
                    <h3>Offer</h3>
                    <div id="controlButtons" class="controlButtons"></div>
                    @BoxTools("Offer")
                </div>
                <div class="box-content">
                    <ul class="summary-offer">
                        <li>
                            <p>
                                <span>Amount</span>
                                <span class="light-green"><%-EzBob.formatPoundsNoDecimals(loan.OfferedCreditLine)%></span>
                            </p>
                        </li>
                        <li>
                            <p>
                                <span>Monthly interest</span>
                                <span class="light-green"><%-EzBob.formatPercents(loan.InterestRate)%></span>
                            </p>
                        </li>
                        <li>
                            <p>
                                <span>Term</span>
                                <span class="light-green"><%-loan.RepaymentPerion%> months</span>
                            </p>
                        </li>
                        <li>
                            <p>
                                <span>Setup fee</span>
                                <span class="light-green"><%-EzBob.formatPoundsNoDecimals(loan.SetupFee)%></span>
                            </p>
                        </li>
                    </ul>

                    <div class="form-group hide">
                        <button class="btn btn-primary" id="offer-edit">edit</button>
                        <button class="btn btn-primary" id="offer-calculate">calculate</button>
                    </div>

                </div>
            </div>
        </div>
            <%}%>
        <%if(medal){%>
        <div class="col-lg-3 col-md-6">
            <div class="box">
                <div class="box-title">
                    <h3>Medal</h3>
                    <h3 class="box-title-collapse" style="display:none;"><%-medal.Medal%> <%-EzBob.formatPercents(medal.Result)%></h3>
                    @BoxTools("Medal", "#calculator")
                </div>
                <div class="box-content">
                    <div id="medalBar" style="width: 10%; height: 70%; position: absolute"></div>
                    <div id="medalHistory" style="width: 60%; height: 70%; position: absolute; left: 30px;"></div>
                    <div style="position: absolute; right: 10px; top: 30%;">
                        <div style="position:relative;">
                            <div style="width:100px;height:100px;position: absolute; top: 30%; left:0; text-align:center">
                                <div><%-medal.Medal%></div>
                                <div><%-EzBob.formatPercents(medal.Result)%></div>
                            </div>
                            <canvas id="medalCanvas" width="100" height="100"></canvas>
                        </div>
                    </div>
                </div>
            </div>
        </div>
            <%}%>
            <%if(m.Alerts){%>
        <div class="col-lg-3 col-md-6">
            <div class="box">
                <div class="box-title">
                    <h3>Alerts</h3>
                    <h3 class="box-title-collapse" style="display:none;"><%-m.Alerts.Errors.length%> Error<%-m.Alerts.Errors.length == 1 ? '' : 's'%>, <%-m.Alerts.Warnings.length%> Warning<%-m.Alerts.Warnings.length == 1 ? '' : 's'%>, <%-m.Alerts.Infos.length%> Info<%-m.Alerts.Infos.length == 1 ? '' : 's'%></h3>
                    @BoxTools("Alerts")
                </div>
                <div class="box-content">
                    <div class="row">
                        <%_.each(m.Alerts.Errors, function(item) {%>
                            <div class="col-md-2 alert alert-<%-item.AlertType%> hidden-xs" data-toggle="tooltip" data-title="<%-item.Alert%> <%-item.Tooltip%>">
                                <span><%-item.Abbreviation%></span>
                            </div>
                        <%});%>
                    </div>
                    <div class="row">
                        <%_.each(m.Alerts.Warnings, function(item) {%>
                            <div class="col-md-2 alert alert-<%-item.AlertType%> hidden-xs" data-toggle="tooltip" data-title="<%-item.Alert%> <%-item.Tooltip%>">
                                <span><%-item.Abbreviation%></span>
                            </div>
                        <%});%>
                    </div>
                    <div class="row">
                        <%_.each(m.Alerts.Infos, function(item) {%>
                            <div class="col-md-2 alert alert-<%-item.AlertType%> hidden-xs" data-toggle="tooltip" data-title="<%-item.Alert%> <%-item.Tooltip%>">
                                <span><%-item.Abbreviation%></span>
                            </div>
                        <%});%>
                    </div>
                </div>
            </div>
        </div>
            <%}%>
        </div>
    </div>
</script>

@helper BoxTools(string bugType, string gotoTab = null){
    <div class="box-tool">
        @if (!string.IsNullOrEmpty(gotoTab))
        {
            <a href="#" data-toggle="tab" class="btn btn-mini btn-primary" onclick="$('a[href=@gotoTab]').click()"><i class="fa fa-ellipsis-h"></i></a>
        }
        <a href="#" class="btn btn-mini btn-primary" data-bug-type="@bugType" data-bug-customer="<%-m.Id%>" data-placement="bottom" data-original-title="" title=""><i class="fa fa-bug"></i></a>
        <a data-action="collapse" href="#"><i class="fa fa-chevron-up"></i></a>
        <a data-action="close" href="#"><i class="fa fa-times"></i></a>
    </div>
}